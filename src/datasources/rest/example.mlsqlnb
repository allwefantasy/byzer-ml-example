[{"kind":1,"language":"markdown","value":"# Rest\n\nIn the notebook, we will show you how to use REST datasource. The REST datasource is a datasource that allows you to query REST APIs. The REST datasource is a built-in datasource that is available in Byzer. You can find the documentation for the REST datasource here: https://docs.byzer.org/#/byzer-lang/zh-cn/datasource/restapi/restapi","outputs":[]},{"kind":1,"language":"markdown","value":"The first example is to query the REST API of the GitHub API. The GitHub API is a REST API that allows you to query the information of the GitHub repository. The GitHub API is a public API, so you can query it without any authentication. The following is the query statement:","outputs":[]},{"kind":2,"language":"mlsql","value":"-- Get Github Organization Info\n\n-- set API URL and params\nset org_name=\"byzer-org\";\nset GITHUB_ORGANIZATION_URL=\"https://api.github.com/orgs/${org_name}\";\n\n-- Load Github Organization API as table\nload Rest.`$GITHUB_ORGANIZATION_URL` \n where `config.connect-timeout`=\"10s\"\n and `config.method`=\"GET\"\n and `header.accept`=\"application/vnd.github.v3+json\"\nas github_org;\n\n\n-- decode API response from binary to a json string\nselect string(content) as content from github_org as response_content;\n\n-- expand the json string \nrun response_content as JsonExpandExt.`` where inputCol=\"content\" and structColumn=\"true\" as github_org;\n\n-- retrieve user infomation and process as a table\nselect content.* from github_org as org_info;","outputs":[{"mime":"x-application/mlsql-notebook","value":"{\n\t\"schema\": {\n\t\t\"type\": \"struct\",\n\t\t\"fields\": [\n\t\t\t{\n\t\t\t\t\"name\": \"avatar_url\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"blog\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"company\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"created_at\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"description\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"email\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"events_url\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"followers\",\n\t\t\t\t\"type\": \"long\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"following\",\n\t\t\t\t\"type\": \"long\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"has_organization_projects\",\n\t\t\t\t\"type\": \"boolean\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"has_repository_projects\",\n\t\t\t\t\"type\": \"boolean\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"hooks_url\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"html_url\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"id\",\n\t\t\t\t\"type\": \"long\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"is_verified\",\n\t\t\t\t\"type\": \"boolean\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"issues_url\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"location\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"login\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"members_url\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"name\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"node_id\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"public_gists\",\n\t\t\t\t\"type\": \"long\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"public_members_url\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"public_repos\",\n\t\t\t\t\"type\": \"long\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"repos_url\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"twitter_username\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"type\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"updated_at\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"name\": \"url\",\n\t\t\t\t\"type\": \"string\",\n\t\t\t\t\"nullable\": true,\n\t\t\t\t\"metadata\": {}\n\t\t\t}\n\t\t]\n\t},\n\t\"data\": [\n\t\t{\n\t\t\t\"avatar_url\": \"https://avatars.githubusercontent.com/u/93700965?v=4\",\n\t\t\t\"blog\": \"https://www.byzer.org/\",\n\t\t\t\"created_at\": \"2021-11-04T06:49:27Z\",\n\t\t\t\"description\": \"Everything is a table\",\n\t\t\t\"events_url\": \"https://api.github.com/orgs/byzer-org/events\",\n\t\t\t\"followers\": 56,\n\t\t\t\"following\": 0,\n\t\t\t\"has_organization_projects\": true,\n\t\t\t\"has_repository_projects\": true,\n\t\t\t\"hooks_url\": \"https://api.github.com/orgs/byzer-org/hooks\",\n\t\t\t\"html_url\": \"https://github.com/byzer-org\",\n\t\t\t\"id\": 93700965,\n\t\t\t\"is_verified\": false,\n\t\t\t\"issues_url\": \"https://api.github.com/orgs/byzer-org/issues\",\n\t\t\t\"location\": \"China\",\n\t\t\t\"login\": \"byzer-org\",\n\t\t\t\"members_url\": \"https://api.github.com/orgs/byzer-org/members{/member}\",\n\t\t\t\"name\": \"Byzer Org\",\n\t\t\t\"node_id\": \"O_kgDOBZXDZQ\",\n\t\t\t\"public_gists\": 0,\n\t\t\t\"public_members_url\": \"https://api.github.com/orgs/byzer-org/public_members{/member}\",\n\t\t\t\"public_repos\": 18,\n\t\t\t\"repos_url\": \"https://api.github.com/orgs/byzer-org/repos\",\n\t\t\t\"type\": \"Organization\",\n\t\t\t\"updated_at\": \"2023-03-10T13:39:49Z\",\n\t\t\t\"url\": \"https://api.github.com/orgs/byzer-org\"\n\t\t}\n\t]\n}"}]}]